# zig_tree_recursion_and_iteration_problem
A minimal example for an issue i'm having with zig 0.14.1.

Issue is demonstrated in problem.zig, which can be executed by way of `zig run problem.zig`.

The example consists of a simple tree data structure, in which nodes are placed in an array, and parent nodes contain indices of their children in a BoundedArray, along with some functions to recursively print the nodes in their tree form.


The two booleans `use_get_children` and `print_full_node` can be used to get different behaviors from the example. 

On my system, with `use_get_children` set to false, the behavior is as expected, with the following output:

```
0:parent:"parent"
├─1:parent:"child A"
│ ├─3:leaf:"grandchild AA"
│ ├─4:leaf:"grandchild AB"
├─2:parent:"child B"
│ ├─5:leaf:"grandchild BA"
│ ├─6:leaf:"grandchild BB"
```

This shows the nodes as we expect them, in a simple tree with a root with two children each of which has two children of their own.

---

On my system, with `use_get_children` set to true and `print_full_node` set to false, "grandchild BB" ends up replacing its parent "child B", thereby skipping one child and one grandchild.

```
0:parent:"parent"
├─1:parent:"child A"
│ ├─3:leaf:"grandchild AA"
│ ├─4:leaf:"grandchild AB"
├─6:leaf:"grandchild BB"
```

---

On my system, with `use_get_children` set to true and `print_full_node` set to true, the recursion spirals out of control, and would perhaps go on forever if the example code didn't contain a deliberate depth limitation. In the example output below the lines are truncated at 80 characters for better readability (there's not much of importance there anyway).   

```
0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 114, 101, 1...
├─1:parent:"child A":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 99, 104, 105, 108...
│ ├─3:leaf:"grandchild AA":problem.Node{ .leaf = problem.Node__struct_23883{ .name = { 103, 114, 97,...
│ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 114, 10...
│ │ ├─1:parent:"child A":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 99, 104, 105,...
│ │ │ ├─3:leaf:"grandchild AA":problem.Node{ .leaf = problem.Node__struct_23883{ .name = { 103, 114,...
│ │ │ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 114...
│ │ │ │ ├─1:parent:"child A":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 99, 104, ...
│ │ │ │ │ ├─... here be dragons
│ │ │ │ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 1...
│ │ │ │ │ ├─... here be dragons
│ │ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 114, ...
│ │ │ ├─1:parent:"child A":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 99, 104, 10...
│ │ │ │ ├─3:leaf:"grandchild AA":problem.Node{ .leaf = problem.Node__struct_23883{ .name = { 103, 11...
│ │ │ │ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 1...
│ │ │ │ │ ├─... here be dragons
│ │ │ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 114...
│ │ │ │ ├─1:parent:"child A":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 99, 104, ...
│ │ │ │ │ ├─... here be dragons
│ │ │ │ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 1...
│ │ │ │ │ ├─... here be dragons
├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 114, 101,...
│ ├─1:parent:"child A":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 99, 104, 105, 1...
│ │ ├─3:leaf:"grandchild AA":problem.Node{ .leaf = problem.Node__struct_23883{ .name = { 103, 114, 9...
│ │ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 114, ...
│ │ │ ├─1:parent:"child A":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 99, 104, 10...
│ │ │ │ ├─3:leaf:"grandchild AA":problem.Node{ .leaf = problem.Node__struct_23883{ .name = { 103, 11...
│ │ │ │ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 1...
│ │ │ │ │ ├─... here be dragons
│ │ │ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 114...
│ │ │ │ ├─1:parent:"child A":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 99, 104, ...
│ │ │ │ │ ├─... here be dragons
│ │ │ │ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 1...
│ │ │ │ │ ├─... here be dragons
│ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 114, 10...
│ │ ├─1:parent:"child A":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 99, 104, 105,...
│ │ │ ├─3:leaf:"grandchild AA":problem.Node{ .leaf = problem.Node__struct_23883{ .name = { 103, 114,...
│ │ │ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 114...
│ │ │ │ ├─1:parent:"child A":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 99, 104, ...
│ │ │ │ │ ├─... here be dragons
│ │ │ │ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 1...
│ │ │ │ │ ├─... here be dragons
│ │ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 114, ...
│ │ │ ├─1:parent:"child A":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 99, 104, 10...
│ │ │ │ ├─3:leaf:"grandchild AA":problem.Node{ .leaf = problem.Node__struct_23883{ .name = { 103, 11...
│ │ │ │ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 1...
│ │ │ │ │ ├─... here be dragons
│ │ │ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 114...
│ │ │ │ ├─1:parent:"child A":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 99, 104, ...
│ │ │ │ │ ├─... here be dragons
│ │ │ │ ├─0:parent:"parent":problem.Node{ .parent = problem.Node__struct_23884{ .name = { 112, 97, 1...
│ │ │ │ │ ├─... here be dragons

```